import 'package:flutter_app/common_import.dart';import 'package:flutter_app/models/index.dart';import 'package:flutter_app/request/fetch_user_info.dart';import 'package:flutter_app/sqflite_model/user_sqflite.dart';class UserInfoModel with ChangeNotifier {  bool _isLogon = false;  UserInfo _userInfo;  bool get isLogon => _isLogon;  UserInfo get userInfo => _isLogon ? _userInfo : null;  void init(UserInfo userInfo) {    this._userInfo = userInfo;    this._isLogon = true;  }/*登录成功*/  Future userLogonSuccess({@required UserInfo userInfo}) async {    this._userInfo = userInfo;    this._isLogon = true;    //更新数据库    await UserSqflite().insertAllDate<UserInfo>([userInfo]);    notifyListeners();  }  Future reFreshUserInfo() async {    if (_isLogon) {      this._userInfo =          await FetchUserInfo.fetch(userToken: _userInfo.user_token);      //更新数据库      await UserSqflite().insertAllDate<UserInfo>([_userInfo]);      notifyListeners();    }  }  /*退出登录*/  Future retireLogon() async {    //更新数据库    await UserSqflite().emptyTable();    this._userInfo = null;    this._isLogon = false;    notifyListeners();  }  /*更新用户信息*/  Future updateUserInfo(UserInfo userInfo) async {    this._userInfo = userInfo;    //更新数据库    await UserSqflite().insertAllDate<UserInfo>([_userInfo]);    notifyListeners();  }}